<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css"/>

</head>
<body>
    <h1 class="title">SpinPrirucnik</h1>

    <table id="tablica">
        <tr>
          <th>Month</th>
          <th>Savings</th>
        </tr>
        <tr>
          <td>January</td>
          <td>$100</td>
        </tr>
      </table>
</body>

<script>
    var test = 25
    addTable()
    var url = "https://jupitermobiletest.jupiter-software.com:30081/jupitermobilex/gen/api/food"
    
    fetchData().then(function (response){
       if(response.ok)
            return response.json()
    }).then(function (dataList){

        console.log(dataList)
        document.getElementsByClassName("title")
        var table = document.getElementById("tablica")     
        for(var i = 0;i < Object.keys(dataList).length;i++){
            addRow(table,dataList[i]["Term"],dataList[i]["Username"])
        }
            
    })
   
    async function fetchData(){
        var response = await fetch(url,{
        method : "POST",
        body: JSON.stringify({
            "queries" : [
                {
                    "query":"SpinCodeAcademy",
                    "params" : {
                        "action" : "getall",
                        "userid" : 1
                    }
                }
            ]
        }),
        headers: {
            "Content-Type": "application/json"
        }
    })
    return response
    }

    function addRow(table,data1,data2){
            var newRow = table.insertRow()
            var firstCell = newRow.insertCell()
            var secondCell = newRow.insertCell()
            firstCell.innerHTML = data1
            secondCell.innerHTML = data2
    }



    

    function addTable (){
        document.getElementsByClassName("title")
        var table = document.getElementById("tablica")
        var row = table.insertRow()
        var cell = row.insertCell()
        var cell2 = row.insertCell()
        var cell3 = row.insertCell()
        var cell4 = row.insertCell()
        cell.innerHTML = "Smth"
        cell2.innerHTML = "Smth2"
        cell3.innerHTML = "Smth3"
        cell4.innerHTML = "Smth4"
    }
</script>
</html>